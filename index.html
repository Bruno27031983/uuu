<!DOCTYPE html>
<html lang="sk" data-theme="light"> <!-- Pridan√Ω data-theme atrib√∫t -->

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bruno's Calculator Pro</title>

    <link rel="manifest" href="./manifest.json" />
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üßÆ</text></svg>">
    <link rel="apple-touch-icon" href="./icons/icon-192x192.webp">
    <meta name="theme-color" content="#7c3aed" /> <!-- Bude dynamicky menen√© JS pre tmav√Ω re≈æim -->

    <!-- Content Security Policy - Bezpeƒçnostn√° politika -->
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' https://www.gstatic.com https://www.google.com https://cdnjs.cloudflare.com https://cdn.sheetjs.com;
    style-src 'self' https://fonts.googleapis.com;
    font-src 'self' https://fonts.gstatic.com;
    img-src 'self' data: https:;
    connect-src 'self' https://www.gstatic.com https://*.googleapis.com https://*.firebaseapp.com https://*.cloudfunctions.net https://identitytoolkit.googleapis.com https://firestore.googleapis.com https://cdnjs.cloudflare.com https://cdn.sheetjs.com;
    frame-src https://www.google.com;
    manifest-src 'self';
    worker-src 'self';
    base-uri 'self';
    object-src 'none';
  " />
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.31/jspdf.plugin.autotable.min.js" defer></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="app-loader">
        <p class="loader-emoji">üßÆ</p>
        <p>Bruno's Calculator Pro+</p> <!-- Mal√° zmena n√°zvu -->
        <p class="loader-small-text">Naƒç√≠tavam aplik√°ciu...</p>
    </div>

    <div class="container container-hidden">
        <div id="auth-container">
            <fieldset id="login-fieldset">
                <legend>Prihl√°senie / Registr√°cia</legend>
                <div id="login-form">
                    <input type="email" id="email" placeholder="Email" aria-label="Email" autocomplete="email">
                    <input type="password" id="password" placeholder="Heslo" aria-label="Heslo"
                        autocomplete="current-password">
                    <button class="btn export-btn" id="btnLogin">Prihl√°si≈• sa</button>
                    <button class="btn export-btn" id="btnRegister">Registrova≈•</button>
                    <a href="#" id="linkResetPassword">Zabudli ste heslo?</a>
                </div>
            </fieldset>
            <div class="header-controls">
                <div id="user-info" class="user-info-flex">
                    <span id="user-email" class="user-email-bold"></span>
                    <button class="btn reset-btn reset-btn-inline" id="btnLogout">Odhl√°si≈• sa</button>
                </div>
                <button id="themeToggleBtn" class="btn theme-toggle-btn" title="Prepn√∫≈• svetl√Ω/tmav√Ω re≈æim">
                    <span id="themeIcon">üåô</span>
                </button>
            </div>
        </div>

        <h1 id="mainTitle">Vitaj üëã</h1>
        <h2 id="subTitle"></h2>

        <div class="month-nav">
            <label for="monthSelect">Mesiac:</label>
            <select id="monthSelect"></select>
            <label for="yearSelect">Rok:</label>
            <select id="yearSelect"></select>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>De≈à</th>
                        <th>Pr√≠chod</th>
                        <th>Odchod</th>
                        <th>Prest√°vka</th>
                        <th>Odpracovan√©</th>
                        <th>Projekt/√öloha</th> <!-- NOV√ù STƒπPEC -->
                        <th>Pozn√°mka</th>
                        <th>Hrub√° Mzda (‚Ç¨)</th>
                        <th>ƒåist√° Mzda (‚Ç¨)</th>
                        <th>Akcie</th>
                    </tr>
                </thead>
                <tbody id="workDays"></tbody>
            </table>
        </div>

        <div id="totalSalary" aria-live="polite">V√Ωpoƒçet celkovej mzdy...</div>
        <div id="localStorageIndicator"></div>
        <div id="syncStatusIndicator" class="sync-status sync-status-synced">
            <span class="sync-icon">‚úì</span>
            <span class="sync-text">Synchronizovan√©</span>
        </div>

        <div class="btn-container">
            <button class="btn export-btn" id="btnExportPdf">Exportova≈• do PDF</button>
            <button class="btn export-btn" id="btnSendPdf">Odosla≈• PDF (s pozn.)</button>
            <button class="btn backup-btn" id="btnCreateBackup">Vytvori≈• z√°lohu (XLSX)</button>
            <button class="btn backup-btn" id="btnRestoreBackup">Obnovi≈• z√°lohu (XLSX)</button>
            <button class="btn warning-btn" id="btnClearMonth" title="Vymaza≈• v≈°etky d√°ta pre aktu√°lny mesiac">Vymaza≈•
                Mesiac</button>
            <button id="toggleSettingsBtn" class="btn backup-btn" aria-expanded="false"
                aria-controls="settings-section">Zobrazi≈• nastavenia aplik√°cie ‚ñº</button>
        </div>

        <div class="settings settings-section-hidden" id="settings-section">
            <div id="settings-collapsible-content" class="visible">
                <fieldset>
                    <legend>Z√°kladn√© nastavenia</legend>
                    <div>
                        <label for="employeeNameInput">Meno pracovn√≠ka:</label>
                        <input type="text" id="employeeNameInput" placeholder="Zadajte meno pracovn√≠ka">
                    </div>
                    <div>
                        <label for="hourlyWageInput">Hodinov√° mzda (‚Ç¨):</label>
                        <input type="text" inputmode="decimal" id="hourlyWageInput">
                    </div>
                    <div>
                        <label for="taxRateInput">Da≈àov√© percento (%):</label>
                        <input type="text" inputmode="decimal" id="taxRateInput">
                    </div>
                    <div>
                        <label for="decimalPlacesSelect">Poƒçet desatinn√Ωch miest:</label>
                        <select id="decimalPlacesSelect">
                            <option value="1">1</option>
                            <option value="2" selected>2</option>
                            <option value="3">3</option>
                        </select>
                    </div>
                    <div>
                        <label for="monthlyGoalInput">Mesaƒçn√Ω cieƒæ z√°robku (‚Ç¨):</label>
                        <input type="text" inputmode="decimal" id="monthlyGoalInput" placeholder="Napr. 1500">
                    </div>
                </fieldset>
            </div>
        </div>
    </div>

    <div id="saveNotification" role="status" aria-live="polite">D√°ta boli √∫spe≈°ne ulo≈æen√©.</div>
    <div id="errorNotification" role="alert" aria-live="assertive">Nastala chyba.</div>
    <div id="warningNotification" role="alert" aria-live="assertive">Upozornenie.</div>

    <script src="app.js" type="module"></script>

    <script src="sw-register.js"></script>
</body>


</html>
